<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Panel de Administración</title>
</head>
<body>
<h1>Panel de Administración Secreto</h1>
<p style="color:red;">Si puedes ver esta página sin ser 'admin', ¡la vulnerabilidad de Control de Acceso Roto funciona!</p>

<hr>

<h3>Buscar Usuario en la Base de Datos</h3>
<p>Introduce un nombre de usuario para buscar sus detalles.</p>

<form th:action="@{/admin/buscar}" method="post">
    <label for="username">Username:</label>
    <input type="text" id="username" name="username">
    <button type="submit">Buscar</button>
</form>

<div th:if="${usuariosEncontrados}">
    <h4>Resultados:</h4>
    <div th:if="${#lists.isEmpty(usuariosEncontrados)}">
        <p>No se encontraron usuarios con ese nombre.</p>
    </div>
    <table border="1" th:if="${not #lists.isEmpty(usuariosEncontrados)}">
        <thead>
        <tr>
            <th>Username</th>
            <th>Rol</th>
            <th>Password (Hash)</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${usuariosEncontrados}">
            <td th:text="${user.username}"></td>
            <td th:text="${user.role}"></td>
            <td th:text="${user.password}" style="font-family: monospace; font-size: 10px;"></td>
        </tr>
        </tbody>
    </table>
</div>

<br>
<a th:href="@{/dashboard}">Volver al Dashboard</a>
</body>
</html>